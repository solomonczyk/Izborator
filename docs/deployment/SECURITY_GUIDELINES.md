# üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏

## üìã –û–±–∑–æ—Ä

–î–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–∞–∫ —É–ø—Ä–∞–≤–ª—è—Ç—å API –∫–ª—é—á–∞–º–∏ –∏ –¥—Ä—É–≥–∏–º–∏ —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ Izborator.

---

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

### 1. –ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ .env —Ñ–∞–π–ª—ã –≤ Git

```bash
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
git add .env
git commit -m "Add env config"

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
# .env —Ñ–∞–π–ª—ã –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (.gitignore)
```

### 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ .env.example –∫–∞–∫ template

```bash
# backend/.env.example —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–º–µ—Ä—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ë–ï–ó —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
# –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–ø–∏—Ä—É—é—Ç –µ–≥–æ –∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç —Å–≤–æ–∏ –∫–ª—é—á–∏:
cp backend/.env.example backend/.env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å backend/.env –∏ –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ (–ª–æ–∫–∞–ª—å–Ω–æ)
```

### 3. GitHub Secrets –¥–ª—è CI/CD

–í—Å–µ API –∫–ª—é—á–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ GitHub Secrets (–Ω–µ –≤ .env —Ñ–∞–π–ª–µ –≤ —Ä–µ–ø–æ):

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):
export OPENAI_API_KEY=sk-your-key-here
export GOOGLE_API_KEY=your-key-here

# –í GitHub (–¥–ª—è workflows):
# –ü–µ—Ä–µ–π—Ç–∏ –≤ Settings ‚Üí Secrets and variables ‚Üí Actions
# –î–æ–±–∞–≤–∏—Ç—å:
#   - OPENAI_API_KEY
#   - GOOGLE_API_KEY
```

---

## üîë –¢–∏–ø—ã API –∫–ª—é—á–µ–π –≤ –ø—Ä–æ–µ–∫—Ç–µ

### OpenAI

**–î–ª—è:** AutoConfig (AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤)

**–ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å:** https://platform.openai.com/api-keys

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –°–æ–∑–¥–∞–π—Ç–µ API –∫–ª—é—á –≤ OpenAI
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤ `backend/.env` –ø–æ–¥ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `OPENAI_API_KEY`
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ª–∏–º–∏—Ç –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–∞ (–≤ OpenAI console)
4. **–í–ê–ñ–ù–û:** –ï—Å–ª–∏ –∫–ª—é—á –±—ã–ª —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω ‚Üí —É–¥–∞–ª–∏—Ç–µ –∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π

**Format:** `sk-proj-...` (–æ–±—ã—á–Ω–æ 200+ —Å–∏–º–≤–æ–ª–æ–≤)

### Google API

**–î–ª—è:** Discovery Worker (–ø–æ–∏—Å–∫ –º–∞–≥–∞–∑–∏–Ω–æ–≤ —á–µ—Ä–µ–∑ Google Custom Search)

**–ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å:** https://cloud.google.com/docs/authentication/api-keys

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –°–æ–∑–¥–∞–π—Ç–µ Cloud Project –≤ Google Cloud Console
2. –í–∫–ª—é—á–∏—Ç–µ Custom Search API
3. –°–æ–∑–¥–∞–π—Ç–µ API –∫–ª—é—á
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤ `backend/.env` –ø–æ–¥ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `GOOGLE_API_KEY` –∏ `GOOGLE_CX`

**Format:** `AIzaSy...` (–æ–±—ã—á–Ω–æ 39 —Å–∏–º–≤–æ–ª–æ–≤)

### Meilisearch Master Key

**–î–ª—è:** –ü–æ–∏—Å–∫–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å

**–ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å:** –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ Meilisearch

**–í–∞–∂–Ω–æ:**
- –í **development**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `masterKey123` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ docker-compose)
- –í **production**: –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ default –∫–ª—é—á –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!

---

## üõ°Ô∏è –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –∫–ª—é—á —É—Ç–µ—á—ë—Ç

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (–≤ —Ç–µ—á–µ–Ω–∏–µ –º–∏–Ω—É—Ç)

1. **–î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∫–ª—é—á:**
   - OpenAI: https://platform.openai.com/account/api-keys ‚Üí Delete
   - Google: Google Cloud Console ‚Üí API credentials ‚Üí Delete
   - Meilisearch: –æ–±–Ω–æ–≤–∏—Ç–µ `MEILI_MASTER_KEY` –≤ docker-compose.yml

2. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á:**
   - –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ —Ä–∞–∑–¥–µ–ª–µ –≤—ã—à–µ

3. **–û–±–Ω–æ–≤–∏—Ç–µ –≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö:**
   - GitHub Secrets (–µ—Å–ª–∏ –±—ã–ª —Ç–∞–º)
   - –õ–æ–∫–∞–ª—å–Ω—ã–π `.env` —Ñ–∞–π–ª (–µ—Å–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª)
   - docker-compose.yml (–µ—Å–ª–∏ –±—ã–ª —Ç–∞–º –≤ hardcode)

### –í —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
   - OpenAI Usage: https://platform.openai.com/account/billing/overview
   - Google Cloud: Cloud Console ‚Üí Audit logs
   - –ü–æ–∏—â–∏—Ç–µ –Ω–µ–æ–±—ã—á–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

5. **–£–≤–µ–¥–æ–º–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:**
   - –°–æ–æ–±—â–∏—Ç–µ —Å–æ–∞–≤—Ç–æ—Ä–∞–º —á—Ç–æ –∫–ª—é—á –±—ã–ª —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω
   - –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –∏—Ö –æ–±–Ω–æ–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ .env —Ñ–∞–π–ª—ã

6. **–£–¥–∞–ª–∏—Ç–µ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ Git** (–µ—Å–ª–∏ –∫–ª—é—á –±—ã–ª –≤ –∫–æ–º–º–∏—Ç–∞—Ö):
   ```bash
   # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç remove-secrets-from-history.bat
   ./remove-secrets-from-history.bat
   
   # –ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
   git filter-branch --tree-filter 'sed -i s/sk-proj-[^[:space:]]*/REDACTED/g *' -- --all
   ```

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ

7. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ detection:**
   - GitHub Secret scanning (–≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ GitHub)
   - Pre-commit hooks (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º)

---

## üöÄ Best Practices

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Environment –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

```bash
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
export OPENAI_API_KEY="sk-..."
go run cmd/api/main.go

# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
apiKey = "sk-..."  # hardcoded –≤ –∫–æ–¥–µ
```

### 2. –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ Scope –∫–ª—é—á–µ–π

- **OpenAI:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Fine-grained API keys —Å –ª–∏–º–∏—Ç–æ–º –Ω–∞ –º–æ–¥–µ–ª–∏
- **Google:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Service Account –≤–º–µ—Å—Ç–æ API keys –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- **Meilisearch:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è dev/staging/prod

### 3. –†–æ—Ç–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ

- –ö–∞–∂–¥—ã–µ 3 –º–µ—Å—è—Ü–∞ (–¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª—é—á–µ–π)
- –ü–æ—Å–ª–µ –Ω–∞–π–º–∞/—É–≤–æ–ª—å–Ω–µ–Ω–∏—è (–µ—Å–ª–∏ –∫–ª—é—á –±—ã–ª —É —É—Ö–æ–¥—è—â–µ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞)
- –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–∏ –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–∏ –Ω–∞ —É—Ç–µ—á–∫—É

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏

```
# backend/.env.example
# OpenAI API key –¥–ª—è AutoConfig
# –ü–æ–ª—É—á–∏—Ç—å: https://platform.openai.com/api-keys
# –†–æ–ª—å: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è CSS —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –º–∞–≥–∞–∑–∏–Ω–æ–≤
OPENAI_API_KEY=sk-your-key-here
```

### 5. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# OpenAI
curl https://api.openai.com/v1/usage/billing/overview \
  -H "Authorization: Bearer $OPENAI_API_KEY"

# Google Cloud
gcloud logging read "protoPayload.serviceName=customsearch.googleapis.com" --limit 50

# Meilisearch
curl http://localhost:7700/stats \
  -H "Authorization: Bearer masterKey123"
```

---

## üìã Checklist –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

–ü—Ä–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ –∫ –ø—Ä–æ–µ–∫—Ç—É:

- [ ] –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–ª —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–ª `backend/.env.example` ‚Üí `backend/.env`
- [ ] –ü–æ–ª—É—á–∏–ª API –∫–ª—é—á–∏ (OpenAI, Google)
- [ ] –î–æ–±–∞–≤–∏–ª –∫–ª—é—á–∏ –≤ `.env` —Ñ–∞–π–ª (–ª–æ–∫–∞–ª—å–Ω–æ)
- [ ] –ó–∞–ø—É—Å—Ç–∏–ª `go run cmd/api/main.go` –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ù–µ —Å–ª—É—á–∞–π–Ω–æ –Ω–µ –∫–æ–º–º–∏—Ç–∏–ª `.env` —Ñ–∞–π–ª (–ø—Ä–æ–≤–µ—Ä–∏–ª `git status`)
- [ ] –î–æ–±–∞–≤–∏–ª `.env` –≤ `.gitignore` (—É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ, –Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ)

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [OWASP Secrets Management](https://owasp.org/www-community/Sensitive_Data_Exposure)
- [GitHub Secret Scanning](https://docs.github.com/en/code-security/secret-scanning)
- [AWS Secrets Manager](https://docs.aws.amazon.com/secretsmanager/) (–¥–ª—è production)
- [HashiCorp Vault](https://www.vaultproject.io/) (–¥–ª—è enterprise)

---

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –≤ Izborator

- ‚úÖ `.env` —Ñ–∞–π–ª—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `.gitignore`
- ‚úÖ `.env.example` —Å–æ–∑–¥–∞–Ω —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ (–±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π)
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ `backend/README.md` –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- ‚è≥ GitHub Secrets –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Ä—É—á–Ω—É—é (–¥–ª—è CI/CD)
- ‚è≥ –ù—É–∂–Ω–æ —Ä–æ—Ç–∏—Ä–æ–≤–∞—Ç—å OpenAI –∏ Google –∫–ª—é—á–∏ (–µ—Å–ª–∏ –æ–Ω–∏ –±—ã–ª–∏ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω—ã)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-12-21

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ Issue –≤ GitHub —Å –º–µ—Ç–∫–æ–π `security`.
